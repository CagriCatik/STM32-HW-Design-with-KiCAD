"use strict";(self.webpackChunkPCB_Design=self.webpackChunkPCB_Design||[]).push([[7680],{19256:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Schematic/Summary/pinout-stm32cube","title":"Pin-Out and STM32CubeIDE","description":"This section explains how to define the functional pin-out of the STM32F103C8Tx using STM32CubeIDE and how to transfer that pin configuration back into the KiCad schematic. The goal is to establish a clean, predictable mapping between firmware configuration and PCB layout, ensuring that the final board supports USB, SWD debugging, an external crystal, and general-purpose headers.","source":"@site/docs/02_Schematic/Summary/03_pinout-stm32cube.md","sourceDirName":"02_Schematic/Summary","slug":"/Schematic/Summary/pinout-stm32cube","permalink":"/STM32-HW-Design-with-KiCAD/docs/Schematic/Summary/pinout-stm32cube","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02_Schematic/Summary/03_pinout-stm32cube.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"SchematicSidebar","previous":{"title":"Power, Reset, and Boot Configuration","permalink":"/STM32-HW-Design-with-KiCAD/docs/Schematic/Summary/power_boot_configuration"},"next":{"title":"External High-Speed Crystal Oscillator, USB/SWD Routing, and Pin-Out Integration","permalink":"/STM32-HW-Design-with-KiCAD/docs/Schematic/Summary/external_clock"}}');var s=i(74848),t=i(28453);const l={},a="Pin-Out and STM32CubeIDE",c={},d=[{value:"Creating a New STM32CubeIDE Project",id:"creating-a-new-stm32cubeide-project",level:2},{value:"Understanding the Pin-Out View",id:"understanding-the-pin-out-view",level:2},{value:"Selecting Debug, Crystal, and USB Functions",id:"selecting-debug-crystal-and-usb-functions",level:2},{value:"SWD Debug Interface (SWCLK / SWDIO)",id:"swd-debug-interface-swclk--swdio",level:3},{value:"External High-Speed Crystal (HSE)",id:"external-high-speed-crystal-hse",level:3},{value:"USB Full-Speed Device",id:"usb-full-speed-device",level:3},{value:"Clock Configuration",id:"clock-configuration",level:2},{value:"Transferring the Pin-Out to KiCad",id:"transferring-the-pin-out-to-kicad",level:2},{value:"Result",id:"result",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"pin-out-and-stm32cubeide",children:"Pin-Out and STM32CubeIDE"})}),"\n",(0,s.jsx)(n.p,{children:"This section explains how to define the functional pin-out of the STM32F103C8Tx using STM32CubeIDE and how to transfer that pin configuration back into the KiCad schematic. The goal is to establish a clean, predictable mapping between firmware configuration and PCB layout, ensuring that the final board supports USB, SWD debugging, an external crystal, and general-purpose headers."}),"\n",(0,s.jsx)(n.p,{children:"STM32CubeIDE provides an Eclipse-based development environment with integrated graphical pin configuration. This makes it easier to select peripherals, assign functions to pins, and validate pin conflicts without manually cross-referencing the datasheet."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-new-stm32cubeide-project",children:"Creating a New STM32CubeIDE Project"}),"\n",(0,s.jsx)(n.p,{children:"Start STM32CubeIDE and create a new project:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Select ",(0,s.jsx)(n.strong,{children:"File \u2192 New \u2192 STM32 Project"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["In the MCU selector, enter the part number:\n",(0,s.jsx)(n.strong,{children:"STM32F103C8Tx"})]}),"\n",(0,s.jsx)(n.li,{children:"CubeIDE displays package type, flash/RAM size, maximum frequency, available peripherals, and supported interfaces."}),"\n",(0,s.jsx)(n.li,{children:"Confirm the part selection and enter a project name."}),"\n",(0,s.jsx)(n.li,{children:"Open the MCU configuration view, which shows a top-down representation of the chip with all pins exposed."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This graphical interface allows you to assign functionality by clicking the pin directly or selecting peripherals from the left-hand configuration panel."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"understanding-the-pin-out-view",children:"Understanding the Pin-Out View"}),"\n",(0,s.jsx)(n.p,{children:"The pin-out view shows all MCU pins around the package outline, including:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"VDD, VDDA, VSS, VSSA power pins"}),"\n",(0,s.jsx)(n.li,{children:"BOOT0 configuration pin"}),"\n",(0,s.jsx)(n.li,{children:"NRST reset pin"}),"\n",(0,s.jsx)(n.li,{children:"All GPIO-capable ports (PAx, PBx, PCx, PDx)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Your previously wired schematic connections become visible here, allowing you to ensure consistency between electrical design and firmware configuration."}),"\n",(0,s.jsx)(n.p,{children:"Pin functionality can be defined in several ways:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Clicking directly on a pin to assign a function"}),"\n",(0,s.jsx)(n.li,{children:"Selecting peripherals from the left sidebar (recommended)"}),"\n",(0,s.jsx)(n.li,{children:"Reading the datasheet (only if familiar with STM32 pin multiplexing)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The preferred method is to enable peripherals via the sidebar, letting CubeIDE automatically configure the related pins."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"selecting-debug-crystal-and-usb-functions",children:"Selecting Debug, Crystal, and USB Functions"}),"\n",(0,s.jsx)(n.p,{children:"Since the goal is a generic, development-friendly board, only essential peripherals are enabled."}),"\n",(0,s.jsx)(n.h3,{id:"swd-debug-interface-swclk--swdio",children:"SWD Debug Interface (SWCLK / SWDIO)"}),"\n",(0,s.jsxs)(n.p,{children:["Navigate to ",(0,s.jsx)(n.strong,{children:"System Core \u2192 SYS \u2192 Debug"})," and select:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Serial Wire"})}),"\n",(0,s.jsx)(n.p,{children:"This assigns:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PA13"})," \u2192 SWDIO"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PA14"})," \u2192 SWCLK"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These are required for programming and debugging through an ST-Link."}),"\n",(0,s.jsx)(n.h3,{id:"external-high-speed-crystal-hse",children:"External High-Speed Crystal (HSE)"}),"\n",(0,s.jsxs)(n.p,{children:["Navigate to ",(0,s.jsx)(n.strong,{children:"RCC \u2192 High Speed Clock (HSE)"})," and enable:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Crystal/Ceramic Resonator"})}),"\n",(0,s.jsx)(n.p,{children:"CubeIDE assigns:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PD0"})," \u2192 HSE_IN"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PD1"})," \u2192 HSE_OUT"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These will later connect to the external 8 MHz crystal on the PCB."}),"\n",(0,s.jsx)(n.h3,{id:"usb-full-speed-device",children:"USB Full-Speed Device"}),"\n",(0,s.jsxs)(n.p,{children:["Navigate to ",(0,s.jsx)(n.strong,{children:"Connectivity \u2192 USB \u2192 Device FS"})]}),"\n",(0,s.jsx)(n.p,{children:"CubeIDE assigns:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PA11"})," \u2192 USB_DM"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PA12"})," \u2192 USB_DP"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These form the USB differential pair for USB-C connection."}),"\n",(0,s.jsxs)(n.p,{children:["Additional USB middleware classes (CDC, MSC, Audio, HID, DFU) can be enabled later under ",(0,s.jsx)(n.strong,{children:"Middleware \u2192 USB Device"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"clock-configuration",children:"Clock Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Under the ",(0,s.jsx)(n.strong,{children:"Clock Configuration"})," tab, you can:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Set the external crystal frequency"}),"\n",(0,s.jsx)(n.li,{children:"Choose the target system clock frequency"}),"\n",(0,s.jsx)(n.li,{children:"Let CubeIDE automatically compute PLL settings"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This ensures your firmware matches the electrical characteristics you have implemented in the schematic."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"transferring-the-pin-out-to-kicad",children:"Transferring the Pin-Out to KiCad"}),"\n",(0,s.jsx)(n.p,{children:"Once the pin mapping is complete, the same assignments must be applied to the schematic."}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PD0"})," \u2192 HSE_IN"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PD1"})," \u2192 HSE_OUT"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PA13/PA14"})," \u2192 SWDIO/SWCLK"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PA11/PA12"})," \u2192 USB_DM/USB_DP"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Add net labels such as:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"HSE_IN  \nHSE_OUT  \nUSB_DP  \nUSB_DM  \nSWDIO  \nSWCLK  \n"})}),"\n",(0,s.jsx)(n.p,{children:"This ensures:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"KiCad recognizes differential pairs (e.g., USB_DP / USB_DM)"}),"\n",(0,s.jsx)(n.li,{children:"Pins are clearly identified during routing"}),"\n",(0,s.jsx)(n.li,{children:"The firmware configuration matches the hardware exactly"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["KiCad treats differential pairs correctly when named with a shared prefix and ",(0,s.jsx)(n.strong,{children:"+ / -"})," suffix. For USB, this is:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"USB_DP  \nUSB_DM\n"})}),"\n",(0,s.jsx)(n.p,{children:"These will later be routed as a matched impedance pair."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"result",children:"Result"}),"\n",(0,s.jsx)(n.p,{children:"After completing the configuration:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The crystal pins are defined and labeled"}),"\n",(0,s.jsx)(n.li,{children:"The SWD interface pins are reserved"}),"\n",(0,s.jsx)(n.li,{children:"The USB differential pair is assigned"}),"\n",(0,s.jsx)(n.li,{children:"All remaining pins can be routed to headers for general I/O"}),"\n",(0,s.jsx)(n.li,{children:"The schematic and CubeIDE configuration remain synchronized"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This provides a clean foundation for the final PCB layout and ensures the firmware and hardware designs evolve consistently."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var r=i(96540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);