<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Scripts/Netlist" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Netlist | STM32 Hardware Design with KiCAD</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://CagriCatik.github.io/STM32-HW-Design-with-KiCAD/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://CagriCatik.github.io/STM32-HW-Design-with-KiCAD/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://CagriCatik.github.io/STM32-HW-Design-with-KiCAD/docs/Scripts/Netlist"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Netlist | STM32 Hardware Design with KiCAD"><meta data-rh="true" name="description" content="4. Netlist Manipulation"><meta data-rh="true" property="og:description" content="4. Netlist Manipulation"><link data-rh="true" rel="icon" href="/STM32-HW-Design-with-KiCAD/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://CagriCatik.github.io/STM32-HW-Design-with-KiCAD/docs/Scripts/Netlist"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/STM32-HW-Design-with-KiCAD/docs/Scripts/Netlist" hreflang="en"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/STM32-HW-Design-with-KiCAD/docs/Scripts/Netlist" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/STM32-HW-Design-with-KiCAD/blog/rss.xml" title="STM32 Hardware Design with KiCAD RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/STM32-HW-Design-with-KiCAD/blog/atom.xml" title="STM32 Hardware Design with KiCAD Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-d6UvP8MjG/jrWTLxz4ph1bEXHVNyMYAx4GqeFPYYR5tWLm4XAoVRSaSejzE/sFs9" crossorigin="anonymous"><link rel="stylesheet" href="/STM32-HW-Design-with-KiCAD/assets/css/styles.a479dc71.css">
<script src="/STM32-HW-Design-with-KiCAD/assets/js/runtime~main.682884de.js" defer="defer"></script>
<script src="/STM32-HW-Design-with-KiCAD/assets/js/main.7471a059.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/STM32-HW-Design-with-KiCAD/"><div class="navbar__logo"><img src="/STM32-HW-Design-with-KiCAD/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/STM32-HW-Design-with-KiCAD/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">PCB Design with KiCad</b></a><a class="navbar__item navbar__link" href="/STM32-HW-Design-with-KiCAD/docs/Introduction/">Introduction</a><a class="navbar__item navbar__link" href="/STM32-HW-Design-with-KiCAD/docs/Schematic/STM32_uC_Decoupling">Schematics</a><a class="navbar__item navbar__link" href="/STM32-HW-Design-with-KiCAD/docs/PCB_Layout/KiCad_PCB-Setup">Layout</a><a class="navbar__item navbar__link" href="/STM32-HW-Design-with-KiCAD/docs/PCB_Routing/Decoupling-Capacitors-Cyrstal-Routing">Routing</a><a class="navbar__item navbar__link" href="/STM32-HW-Design-with-KiCAD/docs/Manufacturing/BOM-Gerber-Drill">Manufacturing</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/Automated_Design">Scripts</a><a class="navbar__item navbar__link" href="/STM32-HW-Design-with-KiCAD/docs/Glossary/A">Glossary</a><a class="navbar__item navbar__link" href="/STM32-HW-Design-with-KiCAD/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CagriCatik/STM32-HW-Design-with-KiCAD" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/Automated_Design">Automated_Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/Customized_Footprint">Customized_Footprint</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/DRC">DRC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/Netlist">Netlist</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/BOM">BOM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/Integration">Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/UI">UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/Design_Automation">Design_Automation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/Plug">Plug</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/STM32-HW-Design-with-KiCAD/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Netlist</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Netlist</h1></header><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-netlist-manipulation">4. <strong>Netlist Manipulation</strong><a href="#4-netlist-manipulation" class="hash-link" aria-label="Direct link to 4-netlist-manipulation" title="Direct link to 4-netlist-manipulation">​</a></h3>
<p>Netlist manipulation is a powerful feature that allows designers to dynamically adjust, merge, and analyze the connectivity between components in a PCB design. Python scripting in KiCad enables more advanced control over the netlist, allowing you to optimize routing, improve signal integrity, and handle complex hierarchical designs.</p>
<p>Netlists are essentially the glue that connects all components in your design, describing which pins on each component should be connected to one another. By using Python scripts, designers can manipulate these connections, identify potential design issues, and automate tasks that would be tedious or error-prone if done manually.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-manipulate-netlists-with-python"><strong>Why Manipulate Netlists with Python?</strong><a href="#why-manipulate-netlists-with-python" class="hash-link" aria-label="Direct link to why-manipulate-netlists-with-python" title="Direct link to why-manipulate-netlists-with-python">​</a></h4>
<p>In complex designs, especially those with hierarchical structures or multi-board systems, manipulating the netlist directly can provide numerous advantages:</p>
<ul>
<li><strong>Merging Hierarchical Designs</strong>: When working with hierarchical designs, different subsystems may be designed separately. Python scripting can merge multiple netlists, ensuring that connections between different levels of hierarchy are maintained correctly.</li>
<li><strong>Optimizing Connectivity</strong>: Automated netlist manipulation allows you to reassign pins or modify connections to optimize routing strategies, reduce wire lengths, and improve overall board layout.</li>
<li><strong>Debugging and Analysis</strong>: Python can be used to analyze the netlist, detecting potential issues such as redundant connections, shorts, or open circuits. This can be particularly useful in large designs where manually identifying such problems is difficult.</li>
<li><strong>Version Control and Comparisons</strong>: Netlist manipulation scripts can be used to compare different versions of a design, ensuring that changes made between versions are intentional and not the result of errors or oversights.</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="common-use-cases-for-netlist-manipulation"><strong>Common Use Cases for Netlist Manipulation</strong><a href="#common-use-cases-for-netlist-manipulation" class="hash-link" aria-label="Direct link to common-use-cases-for-netlist-manipulation" title="Direct link to common-use-cases-for-netlist-manipulation">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-merging-netlists-in-hierarchical-designs">1. <strong>Merging Netlists in Hierarchical Designs</strong><a href="#1-merging-netlists-in-hierarchical-designs" class="hash-link" aria-label="Direct link to 1-merging-netlists-in-hierarchical-designs" title="Direct link to 1-merging-netlists-in-hierarchical-designs">​</a></h5>
<p>In large projects where different sections of a design are split into separate schematic sheets or developed by different teams, it may be necessary to combine multiple netlists into a single, cohesive netlist. Python scripts can automate this merging process, ensuring that all necessary connections between subsystems are maintained.</p>
<p><strong>Example Use Case:</strong></p>
<ul>
<li>A PCB design might have separate netlists for the power supply, the control circuitry, and the sensor interface. By merging these netlists, you ensure all connections between the subsystems are correct before proceeding to layout and routing.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-netlist-filtering-and-analysis">2. <strong>Netlist Filtering and Analysis</strong><a href="#2-netlist-filtering-and-analysis" class="hash-link" aria-label="Direct link to 2-netlist-filtering-and-analysis" title="Direct link to 2-netlist-filtering-and-analysis">​</a></h5>
<p>In complex designs, it’s often useful to filter the netlist to focus on specific sections of the design. For example, you may want to extract only the nets associated with power distribution, or isolate analog sections from digital ones for further analysis. Python scripts can quickly perform this filtering and allow for detailed analysis of specific parts of the design.</p>
<p><strong>Example Use Case:</strong></p>
<ul>
<li>A designer working on a mixed-signal PCB may need to separate the power nets from the signal nets for further analysis. The power nets can then be analyzed to ensure proper voltage distribution, while the signal nets can be inspected for any potential interference or routing issues.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-reassigning-pins-for-routing-optimization">3. <strong>Reassigning Pins for Routing Optimization</strong><a href="#3-reassigning-pins-for-routing-optimization" class="hash-link" aria-label="Direct link to 3-reassigning-pins-for-routing-optimization" title="Direct link to 3-reassigning-pins-for-routing-optimization">​</a></h5>
<p>During the routing phase of PCB design, you may discover that certain components could benefit from having their pins reassigned to different nets in order to simplify routing. Python scripts can automate the process of reassigning pins based on the current routing constraints, helping to reduce wire lengths and improve signal integrity.</p>
<p><strong>Example Use Case:</strong></p>
<ul>
<li>In a design with multiple microcontroller GPIOs, a Python script can reassign GPIO pins dynamically to optimize trace lengths and minimize the number of crossing signals, improving the overall quality of the layout.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="4-detecting-redundant-connections-or-shorts">4. <strong>Detecting Redundant Connections or Shorts</strong><a href="#4-detecting-redundant-connections-or-shorts" class="hash-link" aria-label="Direct link to 4-detecting-redundant-connections-or-shorts" title="Direct link to 4-detecting-redundant-connections-or-shorts">​</a></h5>
<p>In complex designs, especially when multiple designers are involved, it’s possible for redundant connections or shorts to occur. Python scripting can be used to analyze the netlist and detect these potential issues before they become costly errors during manufacturing.</p>
<p><strong>Example Use Case:</strong></p>
<ul>
<li>A netlist analysis script can check for nets that are connected to the same pin multiple times (redundant connections) or check for shorts between power and ground nets, providing an early warning to the designer.</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-guide-implementing-netlist-manipulation-with-python"><strong>Step-by-Step Guide: Implementing Netlist Manipulation with Python</strong><a href="#step-by-step-guide-implementing-netlist-manipulation-with-python" class="hash-link" aria-label="Direct link to step-by-step-guide-implementing-netlist-manipulation-with-python" title="Direct link to step-by-step-guide-implementing-netlist-manipulation-with-python">​</a></h4>
<p>Let’s explore an example where we merge multiple netlists and analyze the merged netlist for any connectivity issues. This example demonstrates how to load and manipulate netlists using Python in KiCad.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-load-the-netlists"><strong>Step 1: Load the Netlists</strong><a href="#step-1-load-the-netlists" class="hash-link" aria-label="Direct link to step-1-load-the-netlists" title="Direct link to step-1-load-the-netlists">​</a></h5>
<p>To start manipulating netlists, you first need to load them into Python. This can be done using the <code>pcbnew</code> library, which provides access to the PCB layout and its associated netlist.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pcbnew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Load the first netlist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netlist1_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/path/to/netlist1.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netlist1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pcbnew</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LoadNetlist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">netlist1_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Load the second netlist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netlist2_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/path/to/netlist2.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netlist2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pcbnew</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LoadNetlist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">netlist2_path</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-merge-the-netlists"><strong>Step 2: Merge the Netlists</strong><a href="#step-2-merge-the-netlists" class="hash-link" aria-label="Direct link to step-2-merge-the-netlists" title="Direct link to step-2-merge-the-netlists">​</a></h5>
<p>Once the netlists are loaded, you can merge them into a single netlist. This is useful when combining designs from different subsystems or merging hierarchical blocks.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">merge_netlists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">netlist1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> netlist2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Loop through all components in the second netlist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> component </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> netlist2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetComponents</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Add component to the first netlist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        netlist1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">component</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Loop through all nets in the second netlist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> net </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> netlist2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetNets</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Add nets to the first netlist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        netlist1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddNet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">net</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Netlists merged successfully.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Example usage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">merge_netlists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">netlist1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> netlist2</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-analyze-the-merged-netlist"><strong>Step 3: Analyze the Merged Netlist</strong><a href="#step-3-analyze-the-merged-netlist" class="hash-link" aria-label="Direct link to step-3-analyze-the-merged-netlist" title="Direct link to step-3-analyze-the-merged-netlist">​</a></h5>
<p>After merging the netlists, it’s important to analyze them to ensure that the merged design is correct. You can use Python to check for connectivity issues, such as shorts, open circuits, or redundant connections.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">analyze_netlist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">netlist</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nets </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> netlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetNets</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Loop through each net and check for issues</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> net </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> nets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        connections </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> net</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetConnections</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Check for shorts (multiple nets connected to the same pin)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">connections</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">connections</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Short detected in net </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">net</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">GetName</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Check for open circuits (nets with too few connections)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">connections</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Open circuit detected in net </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">net</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">GetName</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Netlist analysis complete.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Example usage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">analyze_netlist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">netlist1</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This simple analysis checks for shorts and open circuits in the merged netlist. If any issues are found, they are printed out, allowing the designer to address them before proceeding with the design.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-reassign-pins-for-optimization"><strong>Step 4: Reassign Pins for Optimization</strong><a href="#step-4-reassign-pins-for-optimization" class="hash-link" aria-label="Direct link to step-4-reassign-pins-for-optimization" title="Direct link to step-4-reassign-pins-for-optimization">​</a></h5>
<p>In some cases, it may be beneficial to reassign component pins to optimize routing. Python allows you to do this programmatically, reducing the manual effort required to fine-tune the layout.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reassign_pins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">netlist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> component_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pin_assignments</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    component </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> netlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetComponentByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">component_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Reassign pins based on the new pin assignments</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> pin_number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> new_net </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> pin_assignments</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">items</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> component</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetPinByNumber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pin_number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SetNet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">new_net</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Pins reassigned for component </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">component_name</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Example usage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pin_assignments </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NET1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NET2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NET3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reassign_pins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">netlist1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;U1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pin_assignments</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This example script allows you to specify a component and reassign its pins to different nets, optimizing the connectivity for easier routing.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices-for-netlist-manipulation"><strong>Best Practices for Netlist Manipulation</strong><a href="#best-practices-for-netlist-manipulation" class="hash-link" aria-label="Direct link to best-practices-for-netlist-manipulation" title="Direct link to best-practices-for-netlist-manipulation">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-preserve-hierarchy">1. <strong>Preserve Hierarchy</strong><a href="#1-preserve-hierarchy" class="hash-link" aria-label="Direct link to 1-preserve-hierarchy" title="Direct link to 1-preserve-hierarchy">​</a></h5>
<p>When working with hierarchical designs, ensure that netlist manipulation scripts maintain the logical structure of the design. Flattening hierarchical designs can lead to confusion and increase the risk of connectivity errors.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-backup-the-original-netlist">2. <strong>Backup the Original Netlist</strong><a href="#2-backup-the-original-netlist" class="hash-link" aria-label="Direct link to 2-backup-the-original-netlist" title="Direct link to 2-backup-the-original-netlist">​</a></h5>
<p>Before performing any manipulation, always back up the original netlist. This ensures that you can revert to the previous state if something goes wrong during the manipulation process.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-validation-after-manipulation">3. <strong>Validation After Manipulation</strong><a href="#3-validation-after-manipulation" class="hash-link" aria-label="Direct link to 3-validation-after-manipulation" title="Direct link to 3-validation-after-manipulation">​</a></h5>
<p>After modifying or merging netlists, it’s essential to validate the netlist by running checks such as design rule checks (DRC), connectivity analysis, and schematic reviews. This ensures that the manipulated netlist adheres to the design’s requirements.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="4-modular-approach">4. <strong>Modular Approach</strong><a href="#4-modular-approach" class="hash-link" aria-label="Direct link to 4-modular-approach" title="Direct link to 4-modular-approach">​</a></h5>
<p>If the netlist manipulation involves multiple steps (e.g., merging, pin reassignment, and optimization), it’s best to modularize the script into separate functions. This not only makes the script more readable but also allows for easier debugging and reuse in future projects.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="5-maintain-consistent-net-names">5. <strong>Maintain Consistent Net Names</strong><a href="#5-maintain-consistent-net-names" class="hash-link" aria-label="Direct link to 5-maintain-consistent-net-names" title="Direct link to 5-maintain-consistent-net-names">​</a></h5>
<p>When manipulating netlists, ensure that consistent naming conventions are followed, especially when merging netlists from different sources. Inconsistent net names can cause confusion and lead to connectivity issues that are hard to trace.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-example-multi-board-system-netlist-merging"><strong>Advanced Example: Multi-Board System Netlist Merging</strong><a href="#advanced-example-multi-board-system-netlist-merging" class="hash-link" aria-label="Direct link to advanced-example-multi-board-system-netlist-merging" title="Direct link to advanced-example-multi-board-system-netlist-merging">​</a></h4>
<p>In designs with multiple PCBs that need to communicate, merging netlists from different boards is essential to ensure proper interconnectivity. The following example demonstrates how to merge netlists from two different PCBs in a multi-board system and check for consistency between the interconnects.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">merge_multi_board_netlists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">board1_netlist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> board2_netlist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> interconnects</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Merge netlists as before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    merge_netlists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">board1_netlist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> board2_netlist</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Check the interconnects for consistency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> interconnect </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> interconnects</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        board1_net </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> board1_netlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetNetByName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">interconnect</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;board1_net&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        board2_net </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> board2_netlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetNetByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">interconnect</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;board2_net&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> board1_net </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> board2_net</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Interconnect mismatch: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">interconnect</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation string" style="color:#e3116c">&#x27;board1_net&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> on Board 1 does not match </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">interconnect</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation string" style="color:#e3116c">&#x27;board2_net&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> on Board 2.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Interconnect verified: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">interconnect</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation string" style="color:#e3116c">&#x27;board1_net&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> matches </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">interconnect</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation string" style="color:#e3116c">&#x27;board2_net&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Example usage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interconnects </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;board1_net&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;SPI_CLK&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;board2_net&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;SPI_CLK&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;board1_net&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;GND&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;board2_net&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;GND&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">merge_multi_board_netlists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">board1_netlist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> board2_netlist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> interconnects</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This script merges the netlists for two different boards in a multi-board system and checks that interconnects (such as SPI and GND) match between the boards. Any discrepancies are flagged for review.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion"><strong>Conclusion</strong><a href="#conclusion" class="hash-link" aria-label="Direct link to conclusion" title="Direct link to conclusion">​</a></h4>
<p>Python scripting in KiCad provides immense flexibility for manipulating netlists, whether you&#x27;re working with hierarchical designs, optimizing pin assignments, or ensuring connectivity across multi-board systems. By leveraging Python for netlist manipulation, PCB designers can automate complex tasks, improve design reliability, and streamline the development process. Whether merging designs, filtering nets for analysis, or optimizing component connections, Python offers powerful tools for improving your PCB design workflow.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/06_Scripts/04_Netlist.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/DRC"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DRC</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/STM32-HW-Design-with-KiCAD/docs/Scripts/BOM"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">BOM</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#4-netlist-manipulation" class="table-of-contents__link toc-highlight">4. <strong>Netlist Manipulation</strong></a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/STM32-HW-Design-with-KiCAD/docs/category/introduction">Knowledge Base</a></li><li class="footer__item"><a class="footer__link-item" href="/STM32-HW-Design-with-KiCAD/docs/category/recipes">Recipes</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/CagriCatik/STM32-HW-Design-with-KiCAD" target="_blank" rel="noopener noreferrer" class="footer__link-item">Project 1<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/CagriCatik/STM32-HW-Design-with-KiCAD" target="_blank" rel="noopener noreferrer" class="footer__link-item">Project 2<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/CagriCatik/STM32-HW-Design-with-KiCAD" target="_blank" rel="noopener noreferrer" class="footer__link-item">Project 3<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/STM32-HW-Design-with-KiCAD/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/CagriCatik/STM32-HW-Design-with-KiCAD" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">PCB Design with KiCad</div></div></div></footer></div>
</body>
</html>